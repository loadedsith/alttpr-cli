#!/usr/bin/env bash

echo "
...................===...........................................................................................................................................................................................................
...................~=~...........................................................................................................................................................................................................
...................+I+...........................................................................................................................................................................................................
...................~~:...........................................................................................................................................................................................................
...................~~:...........................................................................................................................................................................................................
...................~~~...........................................................................................................................................................................................................
...................:~~...........................................................................................................................................................................................................
...................:~~...........................................................................................................................................................................................................
...................==?...........................................................................................................................................................................................................
................I77?=I77:........................................................................................................................................................................................................
..............7??I?+I+=~=I:......................................................................................................................................................................................................
......,,,,,.,+=+?I?====~~=?=.....................................................................................................................................................................................................
...,,,,,,,,.?=+?=.:++I.,~~+?.....................................................................................................................................................................................................
,,,,:~:::,,,==+:,:?+??,:,=++...,..,..............................................................................................................................................................................................
,::=777III?+II+II+I+=?~+II+??+IIIIII,.,,............................................................................................,............................................................................................
,,:~7IIII??+++++++I+=?~++++++++??II?:.................................................,.,...........................................,............................................................................................
,,,:77?~====~~~~~~~~~~=?I7I?+I?+==+I,...................................................,........................................................................................................................................
,,,,77I7=::=:::~::::::=====++???+++I,...................................................,........................................................................................................................................
,,,,77?I7~:++::++~~~::,,::~+++=??~+I,............................................................................................................................................................................................
.,,,?++7I~:++~:+++7+=+:~,,:::?+=?I=+:............................................................................................................................................................................................
....I7?=I~:+??,+++~~~?:I=,,:::++++?I,............................................................................................................................................................................................
....I7~??:,++7,=++?=~~:I7,,:::++~?:7,.::=~~~~~=.......::~=~~~+....,~~~=~~~=+.~:=~~~~~~=+=................:~::~~~===.......~~~~~~~~~?.......~~~~~~~=+..~~~=~~~~~=?....~~~~=~~~~~~~~~~~+..~~=~~~~~~~~~~~~~=..:~~~~~~=~~~=++~.......
....I7==?:,==7,~+=I+==:??,,:::+=~,+7,...:,:~~~++........:,,~~++.....:,,=::.....,,:~~~:,,~==+...........,,,::,,,,,:+=?......:,,~~~~=+......,,~~~=:~,....:,,~~=~::....,,:,,,,,,,,:~~~~~....:,,~~~:,,,,,,,==...,,,:~~=,,,,,,===+,...
....??++=::+=7,~+=I+=+:?,,:::~=+~+=+,....,,:::++.........,,::++?.....,,++.......,,::++..,,,+++,.......,,,~:~.....,,=++,.....,,::::~+?.....,,:::++.......,,::=+,.....,:=.......,,::~~......:,::~=,....,,:+.....,,::++....,,,:++?..
....I7=?+:,++,,++=I+=?~,,::::~~,+?~I,...:,:::~++.........,,:::=??....,,++.......,,::+=....,,:++?.....,,:~=+.......,,:++,....,,:::::++,...:,::::++.......,,::=+,.....,:.......,,::~~,......:,::~+,.....:,=.....,,::=+......,,::??.
....7I+?I,,~~,,++~I+=+:::::::=~=I?+I,...,:,,,:~+=........,,::::~++...,,++.......,,::++.....,,:++?...:,,:==........:,::++....,,::,:::+?...,,::::++.......,,::=+,....:........,,,::~=.......:,,:~+,......,~.....,,::++......,,::+=.
....77+I7:,~~I,,~~7+=+:,,,,~:=I7II+I,..:,=+,,::+I........,,~,,,:~++..,,++.......,,::++.....:,,:?+...,,::=?.........,,:=++...,,=~,,::++,.:,~,,::++.......,,::=+,............,,,::~~........:,,:~+,....,..:.....,,::++......,,::==.
....I7+II~,??:,~,,7+=?=+,~+7I?=II7+I,..,,=,:,,:=+........,,++:,,::++,,,++.......,,::++......,,:~++..,,:~=?....+....,,::+?...,,=+,,,:~+?.,,=,,,:++.......,,::=+,............,,::~~,........:,::~+,...:,........,,::++.....,,,::~+.
....?+=II:,::,,++~7?+?=+?=+III?+II+=,.:,=+..,,::+?.......,,+=.,,,::++,,+=.......,,::++......,,::+?..,::~+=...,+?...,,::++...,,=+,:,,:++~,~=:,,:++.......,,::=+,...........,,::~~=.........:,:::+=~~,+,........,,::++~~:::,,,:,:..
....I7=?=:,~==,~+I7?+?:=??+?I7?+=I+I,..,=:..:,::++.......,,+=..,,,:::::++.......,,::++......,,::=+.,,::=+=..,,:~+..,,::++...,,=+,.,,::+~~=::,,:++.......,,::=+,..........:,::~~+..........:,::::,,,,+,........,,:::,,,::=::,.....
....I7+=+:,+:I,~+?7I?I::~++=?7I?==+I,,,=+=++~,,:=+~......,,+=....,,,:::+=.......,,::++......,,:~=?..,,:~++...::=...,,::=+...,,==,.:,,:::~+.:,,:++.......,,::=+,.........,,,:~~+...........:,::~=,..::,........,,::++:,,:=+~......
....77+++:,+=?,=+?77?I:::=+?+I7I+++I,,,,,:,,,,,::+?......,,+=.....,,,::+=.......,,::++.....,,,:~==..,,:~+?....+....,,::=?...,,==,..,,::==~.,,,:++.......,,::=+,........,,,::~~............:,,:~+,...,...:.....,,::++.:,,:++......
....?+++?:,++~,+++77I7,,:~=+?+II?++?:,~=,....:,::++......,,+=......:,,:+=.......,,::++.....,,::~~...,,::+?........,,,:=~:...,,==,..,,,:==..,,,:++.......,,::=+,........,,::~~:.......+....:,,:~+,......,=.....,,::++..,,,:?+,....
....77+?I:,+?~,+++7II7:,:::~+??7I?+7,,=+......,,:~+?.....,,+=.......:.,++.......,,::=+....,,,:~~....,,,:++........,,:~~+....,,==,...,,~=:..,,,:++.......,,::++,.......,,::~==......,:~....:,,:~+,......,+.....,,::++...:,::++,...
....I7+I7:,++:,++=7??7~,,:::~?+?I?+I,~=,.......,::++.....,,+=.........,,=.......,,::++...,,,:::......:,,:+?......,,,::=.....,,=+,....,~=...:,,:++.......,,::++,......,,,:~~+......:,=.....:,,:~+,.....,,+.....,,::++....,,::+?:..
....II+II,,++,,?++7?+7~I,,:::~++II+,,=+.......:,::=+=....,,++..........,=.......,,::++=:,,,::~.........,,,?++...~,,:,=......,,++:....:~:...,,::++,......,,::=+:......,,::++~=====~,=+.....,,:::+=~~~~:,=+....,,,::++.....,,::?+:.
....II++,,,,,,,,,=?++7~7I,,,,,,,=?,,,,=?.....,,,,,,,=?.:,,,,:+,.........,.....:,,,,,,,,,,,::............:,,:==~::,,~.......:,,,:+I....=...:,,,,,:+I....,,,,,,:=?....,,,,,,::::::::,~+....,,,,,,,,,,,,,,,+...:,,,,,,:+=...,,,,,,=?
.....+?:::::::::~~=:~I~77I~:::::::=:........................................................................:::::.....................:..........................................................................................
......II7+=====?I?I+=?:777II?+?+77I..............................................................................................................................................................................................
.......:7+?+===?7?I+=?:77IIII+II7:.........................................................,.....................................................................................................................................
.........?I7I=+?7?I+=?:77I?I777~...................................,.......................,...........................................,............,,...................................,............................,......,...
..........,II77+++I+=+:?+?7777...................................................................................................................................................................................................
.............~?=III+=+:77+7:.....................................................................................................................................................................................................
................~II+=?~I:........................................................................................................................................................................................................
..................I+=?...........................................................................................................................................................................................................
..................I+=?...........................................................................................................................................................................................................
..................I+=?...........................................................................................................................................................................................................
..................~+=?...........................................................................................................................................................................................................
...................+~:...........................................................................................................................................................................................................
....................=............................................................................................................................................................................................................
"

echo "
A Link to the Past: Randomizer
by Veetorp, Karkat, Christos0wen, Smallhacker and Dessyreqt
alttpr.com/en/daily

this script by loadedsith

github.com/loadedsith/alttpr-cli"




if [[ -z "${ALTTPR_SNES_ROMS}" ]]; then
  SNES_ROM="/home/pi/RetroPie/roms/snes"
else
  SNES_ROM="${ALTTPR_SNES_ROMS}"
fi

if [[ -z "${ALTTPR_BUILD_FLAGS}" ]]; then
  BUILD_FLAGS="-t random"
else
  BUILD_FLAGS="${ALTTPR_BUILD_FLAGS}"
fi

if [ -d "$SNES_ROM" ]; then
  cd $SNES_ROM;
fi
echo "
Working directory: $SNES_ROM
"
npx -p github:loadedsith/alttpr-cli -c "alttpr-cli check && echo '' && alttpr-cli update && echo '' && alttpr-cli build $BUILD_FLAGS && echo '' "

echo "
Rom built!
Waiting 10 seconds so you can see what you're up against!
"

sleep 10s

echo "
Restarting emulation station.
"

sleep 3s

touch /tmp/es-restart
killall emulationstation

sleep 3s
